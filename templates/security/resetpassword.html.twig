{% extends 'base.html.twig' %}

{% block title %}Réinitialiser le mot de passe{% endblock %}

{% block body %}
    <h1>Réinitialiser le mot de passe</h1>

    <form method="post" id="reset-password-form">
        <div class="form-group">
            <label for="password">Nouveau mot de passe</label>
            <input type="password" id="password" name="password" class="form-control" required>
            <small id="passwordHelp" class="form-text text-muted">
                Le mot de passe doit contenir au moins 8 caractères, une lettre majuscule, un chiffre et un caractère spécial.
            </small>
        </div>
        <button type="submit" class="btn btn-primary">Réinitialiser</button>
    </form>

    <script>
        document.getElementById('reset-password-form').addEventListener('submit', function(event) {
            var password = document.getElementById('password').value;
            var passwordHelp = document.getElementById('passwordHelp');
            var passwordPattern = /^(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/;

            if (!passwordPattern.test(password)) {
                event.preventDefault();
                passwordHelp.classList.add('text-danger');
                passwordHelp.textContent = 'Le mot de passe doit contenir au moins 8 caractères, une lettre majuscule, un chiffre et un caractère spécial.';
            } else {
                passwordHelp.classList.remove('text-danger');
                passwordHelp.textContent = 'Le mot de passe est valide.';
            }
        });
    </script>
{% endblock %}
